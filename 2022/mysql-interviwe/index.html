<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="qingling0910">
  <meta name="description" content="摸鱼笔记">
  <meta name="keywords" content="博客 个人 笔记">
  
  <link rel="prev" href="https://qingling0910.github.io/2022/get-post/" />
  <link rel="next" href="https://qingling0910.github.io/2022/delete-truncate/" />
  <link rel="canonical" href="https://qingling0910.github.io/2022/mysql-interviwe/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           mysql面试题 | 庆玲的博客
       
  </title>
  <meta name="title" content="mysql面试题 | 庆玲的博客">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/qingling0910.github.io"
    },
    "articleSection" : "posts",
    "name" : "mysql面试题",
    "headline" : "mysql面试题",
    "description" : "面试中MySQL一些常见的问题 1、CHAR、VARCHAR的区别是什么？\nVARCHAR类型用于存储可变长度字符串，是最常见的字符串数据类型。它比固定长度类型更节省空间，因为它仅使用必要的空间(根据实际字符串的长度改变存储空间)。\nVARCHAR节省了存储空间，所以对性能也有帮助。但是，由于行是变长的，在UPDATE时可能使行变得比原来更长，这就导致需要做额外的工作。如果一个行占用的空间增长，并且在页内没有更多的空间可以存储，在这种情况下，不同的存储引擎的处理方式是不一样的。例如，MylSAM会将行拆成不同的片段存储，InnoDB则需要分裂页来使行可以放进页内。\nCHAR类型用于存储固定长度字符串：MySQL总是根据定义的字符串长度分配足够的空间。当存储CHAR值时，MySQL会删除字符串中的末尾空格(在MySQL 4.1和更老版本中VARCHAR 也是这样实现的——也就是说这些版本中CHAR和VARCHAR在逻辑上是一样的，区别只是在存储格式上)。\n同时，CHAR值会根据需要采用空格进行剩余空间填充，以方便比较和检索。但正因为其长度固定，所以会占据多余的空间，也是一种空间换时间的策略。\nCHAR适合存储很短或长度近似的字符串。例如，CHAR非常适合存储密码的MD5值，因为这是一个定长的值。对于经常变更的数据，CHAR也比VARCHAR更好，因为定长的CHAR类型不容易产生碎片。对于非常短的列，CHAR比VARCHAR在存储空间上也更有效率。例如用CHAR(1)来存储只有Y和N的值，如果采用单字节字符集只需要一个字节，但是VARCHAR(1)却需要两个字节，因为还有一个记录长度的额外字节。\n2、TRUNCATE和DELETE的区别是什么？\nDELETE命令从一个表中删除某一行，或多行，TRUNCATE命令永久地从表中删除每一行。\n3、什么是触发器，MySQL中都有哪些触发器？\n触发器是指一段代码，当触发某个事件时，自动执行这些代码。在MySQL数据库中有如下六种触发器：1.Before Insert2.After Insert3.Before Update4.After Update5.Before Delete6.After Delete\n4、FLOAT和DOUBLE的区别是什么？",
    "inLanguage" : "en-us",
    "author" : "qingling0910",
    "creator" : "qingling0910",
    "publisher": "qingling0910",
    "accountablePerson" : "qingling0910",
    "copyrightHolder" : "qingling0910",
    "copyrightYear" : "2022",
    "datePublished": "2022-04-02 00:00:00 \x2b0000 UTC",
    "dateModified" : "2022-04-02 00:00:00 \x2b0000 UTC",
    "url" : "https:\/\/qingling0910.github.io\/2022\/mysql-interviwe\/",
    "wordCount" : "238",
    "keywords" : [ "mysql", "庆玲的博客"]
}
</script>

</head>

  


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-160203449-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://qingling0910.github.io">庆玲的博客</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">博客</a>
                
                <a class="menu-item" href="/categories/" title="">分类</a>
                
                <a class="menu-item" href="/tags/" title="">标签</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>
                <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;
                <a href="https://qingling0910.github.io">庆玲的博客</a>
            </div>
            <div class="menu-toggle">
                <svg t="1618556759902" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1299" width="16" height="16"><path d="M896 1024h-213.333333a128 128 0 0 1-128-128v-213.333333a128 128 0 0 1 128-128h213.333333a128 128 0 0 1 128 128v213.333333a128 128 0 0 1-128 128z m-213.333333-384a42.666667 42.666667 0 0 0-42.666667 42.666667v213.333333a42.666667 42.666667 0 0 0 42.666667 42.666667h213.333333a42.666667 42.666667 0 0 0 42.666667-42.666667v-213.333333a42.666667 42.666667 0 0 0-42.666667-42.666667z m-341.333334 384H128a128 128 0 0 1-128-128v-213.333333a128 128 0 0 1 128-128h213.333333a128 128 0 0 1 128 128v213.333333a128 128 0 0 1-128 128z m-213.333333-384a42.666667 42.666667 0 0 0-42.666667 42.666667v213.333333a42.666667 42.666667 0 0 0 42.666667 42.666667h213.333333a42.666667 42.666667 0 0 0 42.666667-42.666667v-213.333333a42.666667 42.666667 0 0 0-42.666667-42.666667z m768-170.666667h-213.333333a128 128 0 0 1-128-128V128a128 128 0 0 1 128-128h213.333333a128 128 0 0 1 128 128v213.333333a128 128 0 0 1-128 128z m-213.333333-384a42.666667 42.666667 0 0 0-42.666667 42.666667v213.333333a42.666667 42.666667 0 0 0 42.666667 42.666667h213.333333a42.666667 42.666667 0 0 0 42.666667-42.666667V128a42.666667 42.666667 0 0 0-42.666667-42.666667z m-341.333334 384H128a128 128 0 0 1-128-128V128a128 128 0 0 1 128-128h213.333333a128 128 0 0 1 128 128v213.333333a128 128 0 0 1-128 128zM128 85.333333a42.666667 42.666667 0 0 0-42.666667 42.666667v213.333333a42.666667 42.666667 0 0 0 42.666667 42.666667h213.333333a42.666667 42.666667 0 0 0 42.666667-42.666667V128a42.666667 42.666667 0 0 0-42.666667-42.666667z" p-id="1300"></path></svg>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">博客</a>
                
                <a class="menu-item" href="/categories/" title="">分类</a>
                
                <a class="menu-item" href="/tags/" title="">标签</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">mysql面试题</h1>
        <div class="post-meta">
                作者： <a itemprop="name" href="https://qingling0910.github.io" rel="author">qingling0910</a> 时间： 
                <span class="post-time">
                 <time datetime=2049-04-02 itemprop="datePublished">April 2, 2022</time>
                </span>
                分类： 
                
        </div>
    </header>
    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          <p>面试中MySQL一些常见的问题
1、CHAR、VARCHAR的区别是什么？</p>
<p>VARCHAR类型用于存储可变长度字符串，是最常见的字符串数据类型。它比固定长度类型更节省空间，因为它仅使用必要的空间(根据实际字符串的长度改变存储空间)。</p>
<p>VARCHAR节省了存储空间，所以对性能也有帮助。但是，由于行是变长的，在UPDATE时可能使行变得比原来更长，这就导致需要做额外的工作。如果一个行占用的空间增长，并且在页内没有更多的空间可以存储，在这种情况下，不同的存储引擎的处理方式是不一样的。例如，MylSAM会将行拆成不同的片段存储，InnoDB则需要分裂页来使行可以放进页内。</p>
<p>CHAR类型用于存储固定长度字符串：MySQL总是根据定义的字符串长度分配足够的空间。当存储CHAR值时，MySQL会删除字符串中的末尾空格(在MySQL 4.1和更老版本中VARCHAR 也是这样实现的——也就是说这些版本中CHAR和VARCHAR在逻辑上是一样的，区别只是在存储格式上)。</p>
<p>同时，CHAR值会根据需要采用空格进行剩余空间填充，以方便比较和检索。但正因为其长度固定，所以会占据多余的空间，也是一种空间换时间的策略。</p>
<p>CHAR适合存储很短或长度近似的字符串。例如，CHAR非常适合存储密码的MD5值，因为这是一个定长的值。对于经常变更的数据，CHAR也比VARCHAR更好，因为定长的CHAR类型不容易产生碎片。对于非常短的列，CHAR比VARCHAR在存储空间上也更有效率。例如用CHAR(1)来存储只有Y和N的值，如果采用单字节字符集只需要一个字节，但是VARCHAR(1)却需要两个字节，因为还有一个记录长度的额外字节。</p>
<p>2、TRUNCATE和DELETE的区别是什么？</p>
<p>DELETE命令从一个表中删除某一行，或多行，TRUNCATE命令永久地从表中删除每一行。</p>
<p>3、什么是触发器，MySQL中都有哪些触发器？</p>
<p>触发器是指一段代码，当触发某个事件时，自动执行这些代码。在MySQL数据库中有如下六种触发器：1.Before Insert2.After Insert3.Before Update4.After Update5.Before Delete6.After Delete</p>
<p>4、FLOAT和DOUBLE的区别是什么？</p>
<p>FLOAT类型数据可以存储至多8位十进制数，并在内存中占4字节。
DOUBLE类型数据可以存储至多18位十进制数，并在内存中占8字节。
5、如何在MySQL种获取当前日期？</p>
<p>SELECT CURRENT_DATE()
6、如何查询第N高的分数？</p>
<p>这里有几个注意点:</p>
<p>因为成绩可能有一样的值，所以使用DISTINCT进行去重
如果不存在第N高成绩的分数，那么查询应返回 null
把下方的N换成具体的数值查询</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> ifNull(
	(<span style="color:#66d9ef">select</span> <span style="color:#66d9ef">distinct</span> <span style="color:#f92672">`</span>score<span style="color:#f92672">`</span>
		<span style="color:#66d9ef">from</span> students 
		<span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> score <span style="color:#66d9ef">Desc</span>
		<span style="color:#66d9ef">limit</span> N<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>),<span style="color:#66d9ef">null</span>
) <span style="color:#66d9ef">as</span> target_score
</code></pre></div><p>7、请说明InnoDB和MyISAM的区别</p>
<p>这个在面试过程中过的比较多。</p>
<p>InnoDB支持事务，MyISAM不支持；
InnoDB数据存储在共享表空间，MyISAM数据存储在文件中；
InnoDB支持行级锁，MyISAM只支持表锁；
InnoDB支持崩溃后的恢复，MyISAM不支持；
InnoDB支持外键，MyISAM不支持；
InnoDB不支持全文索引，MyISAM支持全文索引；
8、innodb引擎的特性</p>
<p>1、插入缓冲（insert buffer)
2、二次写(double write)
3、自适应哈希索引(ahi)4、预读(read ahead)
9、请说明varchar和text的区别</p>
<p>varchar可指定字符数，text不能指定，内部存储varchar是存入的实际字符数+1个字节（n&lt;=255）或2个字节(n&gt;255)，text是实际字符数+2个字节。
text类型不能有默认值。
varchar可直接创建索引，text创建索引要指定前多少个字符。
varchar查询速度快于text,在都创建索引的情况下，text的索引几乎不起作用。
查询text需要创建临时表。
10、简单描述MySQL中，索引，主键，唯一索引，联合索引的区别，对数据库的性能有什么影响？</p>
<p>这个在面试过程中过的比较多。</p>
<p>一个表只能有一个主键索引，但是可以有多个唯一索引。
主键索引一定是唯一索引，唯一索引不是主键索引。
主键可以与外键构成参照完整性约束，防止数据不一致。
联合索引：将多个列组合在一起创建索引，可以覆盖多个列。（也叫复合索引，组合索引）
外键索引：只有InnoDB类型的表才可以使用外键索引，保证数据的一致性、完整性、和实现级联操作（基本不用）。
全文索引：MySQL自带的全文索引只能用于MyISAM，并且只能对英文进行全文检索 （基本不用）
11、创建MySQL联合索引应该注意什么？</p>
<p>需遵循前缀原则</p>
<p>12、列值为NULL时，查询是否会用到索引？</p>
<p>在MySQL里NULL值的列也是走索引的。当然，如果计划对列进行索引，就要尽量避免把它设置为可空，MySQL难以优化引用了可空列的查询,它会使索引、索引统计和值更加复杂。</p>
<p>13：以下语句是否会应用索引：SELECT FROM users WHERE YEAR(adddate) &lt; 2019</p>
<p>不会，因为只要列涉及到运算，MySQL就不会使用索引。</p>
<p>14、MyISAM索引实现？</p>
<p>MyISAM存储引擎使用B+Tree作为索引结构，叶节点的data域存放的是数据记录的地址。MyISAM的索引方式也叫做非聚簇索引的，之所以这么称呼是为了与InnoDB的聚簇索引区分。</p>
<p>15、MyISAM索引与InnoDB索引的区别？</p>
<p>InnoDB索引是聚簇索引，MyISAM索引是非聚簇索引。
InnoDB的主键索引的叶子节点存储着行数据，因此主键索引非常高效。
MyISAM索引的叶子节点存储的是行数据地址，需要再寻址一次才能得到数据。
InnoDB非主键索引的叶子节点存储的是主键和其他带索引的列数据，因此查询时做到覆盖索引会非常高效。
16、MySQL的关联查询语句你会那些？</p>
<p>六种关联查询</p>
<p>1.交叉连接（CROSS JOIN）
2.内连接（INNER JOIN）
3.外连接（LEFT JOIN/RIGHT JOIN）
4.联合查询（UNION与UNION ALL）
5.全连接（FULL JOIN）
6.交叉连接（CROSS JOIN）
平时用到比较多的是内连和外连， 以及联合查询</p>
<p>a)、内连接分为三类:</p>
<p>等值连接：ON A.id=B.id
不等值连接：ON A.id &gt; B.id
自连接：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> A T1 <span style="color:#66d9ef">INNER</span> <span style="color:#66d9ef">JOIN</span> A T2 <span style="color:#66d9ef">ON</span> T1.id<span style="color:#f92672">=</span>T2.pid
</code></pre></div><p>b)、外连接 分为: 左外连接、右外连接</p>
<p>左外连接：LEFT OUTER JOIN, 以左表为主，先查询出左表，按照ON后的关联条件匹配右表，没有匹配到的用NULL填充，可以简写成LEFT JOIN</p>
<p>右外连接：RIGHT OUTER JOIN, 以右表为主，先查询出右表，按照ON后的关联条件匹配左表，没有匹配到的用NULL填充，可以简写成RIGHT JOIN</p>
<p>c)、联合查询（UNION与UNION ALL）</p>
<p>就是把多个结果集集中在一起，UNION前的结果为基准，需要注意的是联合查询的列数要相等，相同的记录行会合并 如果使用UNION ALL，不会合并重复的记录行3.效率 UNION 高于 UNION ALL</p>
<p>d)、全连接（FULL JOIN）</p>
<p>1.MySQL不支持全连接 2.可以使用LEFT JOIN 和UNION和RIGHT JOIN联合使用</p>
<p>17、UNION与UNION ALL的区别？</p>
<p>如果使用UNION ALL，不会合并重复的记录行 效率 UNION 高于 UNION ALL</p>
<p>18、如何优化慢SQL</p>
<p>使用explain分析单条SQL语句</p>
<p>优化查询过程中的数据访问</p>
<p>访问数据太多导致查询性能下降
确定应用程序是否在检索大量超过需要的数据，可能是太多行或列
确认MySQL服务器是否在分析大量不必要的数据行
避免犯如下SQL语句错误
查询不需要的数据。解决办法：使用limit解决多表
关联返回全部列。解决办法：指定列名
总是返回全部列。解决办法：避免使用SELECT *重复
查询相同的数据。解决办法：可以缓存数据，下次直接读取缓存
是否在扫描额外的记录。解决办法：使用explain进行分析，如果发现查询需要扫描大量的数据，但只返回少数的行，可以通过如下技巧去优化:</p>
<p>使用索引覆盖扫描，把所有的列都放到索引中，这样存储引擎不需要回表获取对应行就可以返回结果。
改变数据库和表的结构，修改数据表范式
重写SQL语句，让优化器可以以更优的方式执行查询。</p>
<p>19、优化长难的查询语句</p>
<p>一个复杂查询还是多个简单查询
MySQL内部每秒能扫描内存中上百万行数据，相比之下，响应数据给客户端就要慢得多使用尽可能小的查询是好的，但是有时将一个大的查询分解为多个小的查询是很有必要的。
切分查询: 将一个大的查询分为多个小的相同的查询
一次性删除1000万的数据要比一次删除1万，暂停一会的方案更加损耗服务器开销。
分解关联查询，让缓存的效率更高。
执行单个查询可以减少锁的竞争。
在应用层做关联更容易对数据库进行拆分。
查询效率会有大幅提升。
较少冗余记录的查询。</p>
<p>20、优化特定类型的查询语句</p>
<p>count()会忽略所有的列，直接统计所有列数，不要使用count(列名)
MyISAM中，没有任何where条件的count()非常快。
当有where条件时，MyISAM的count统计不一定比其它引擎快。
可以使用explain查询近似值，用近似值替代count(*)
增加汇总表
使用缓存</p>
<p>21、优化关联查询</p>
<p>确定ON或者USING子句中是否有索引。
确保GROUP BY和ORDER BY只有一个表中的列，这样MySQL才有可能使用索引。</p>
<p>22、优化子查询</p>
<p>用关联查询替代
优化GROUP BY和DISTINCT
这两种查询据可以使用索引来优化，是最有效的优化方法
关联查询中，使用标识列分组的效率更高
如果不需要ORDER BY，进行GROUP BY时加ORDER BY NULL，MySQL不会再进行文件排序。
WITH ROLLUP超级聚合，可以挪到应用程序处理</p>
<p>23、优化LIMIT分页</p>
<p>LIMIT偏移量大的时候，查询效率较低</p>
<p>可以记录上次查询的最大ID，下次查询时直接根据该ID来查询</p>
<p>24、优化UNION查询</p>
<p>UNION ALL的效率高于UNION</p>
<p>25、优化WHERE子句</p>
<p>解题方法对于此类考题，先说明如何定位低效SQL语句，然后根据SQL语句可能低效的原因做排查，先从索引着手，如果索引没有问题，考虑以上几个方面，数据访问的问题，长难查询句的问题还是一些特定类型优化的问题，逐一回答。</p>
<p>26、乐观锁和悲观锁</p>
<p>这个问题一般在面试中都会问到</p>
<p>悲观锁</p>
<p>总是假设最坏的情况，每次取数据时都认为其他线程会修改，所以都会加（悲观）锁。一旦加锁，不同线程同时执行时,只能有一个线程执行，其他的线程在入口处等待，直到锁被释放。</p>
<p>乐观锁</p>
<p>顾名思义就是在操作时很乐观，认为操作不会产生并发问题(不会有其他线程对数据进行修改)，因此不会上锁。但是在更新时会判断其他线程在这之前有没有对数据进行修改，一般会使用版本号机制或CAS(compare and swap)算法实现。</p>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>作者:</span>
                <span>qingling0910 </span>
                </p>
            
    </div>

    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>标签: 
            
            <span class="tag"><a href="https://qingling0910.github.io/tags/mysql/">
                    #mysql</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">返回</a></span> · 
                <span><a href="https://qingling0910.github.io">主页</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://qingling0910.github.io/2022/get-post/" class="prev" rel="prev" title="get和post的区别"><i class="iconfont icon-left"></i>&nbsp;get和post的区别</a>
         
        
        <a href="https://qingling0910.github.io/2022/delete-truncate/" class="next" rel="next" title="truncate和delete的区别">truncate和delete的区别&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
		  <div id="utter-container"></div>
    <script src="https://utteranc.es/client.js"
        repo= 'qingling0910/qingling0910.github.io'
        issue-term= 'title'
        label= 'utterance'
        theme= 'github-dark-orange'
        crossorigin="anonymous"
        async>
    </script>

    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2022 - 2023</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://qingling0910.github.io">qingling0910</a>  </span> 
         

         
		 
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  



     </div>
  </body>
</html>
